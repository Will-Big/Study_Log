<span style="color:yellow">교착 상태란?</span>
- 일어나지 않을 사건을 기다리며 진행이 멈춰버리는 현상
	- 식사하는 철학자 문제
- 교착 상태 그래프
	- 자원 할당 그래프
		- 교착 상태 발생 조건 파악 가능
			- 어떤 프로세스가 어떤 자원을 할당 받아 사용 중인지 확인 가능
			- 어떤 프로세스가 어떤 자원을 기다리고 있는지 확인 가능
		- 표현 방법
			- 프로세스는 원으로, 자원의 종류는 사각형으로 표현
			- 사용할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현
			- 프로세스가 어떤 자원을 할당 받아 사용 중이라면 자원에서 프로세스를 향해 화살표를 표시
			- 프로세스가 어떤 자원을 기다리고 있다면 프로세스에서 자원으로 화살표를 표시
			- ![[Pasted image 20231026012446.png]]
		- 교착 상태가 일어난 그래프의 특징
			- 자원 할당 그래프가 <span style="color:red">원의 형태</span>를 띄고 있음
- 교착 상태가 발생할 조건(<span style="color:red">모두 만족</span>시에만 교착 상태가 발생할 수 있음)
	- 상호 배제 : 한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없는 상태
	- 점유와 대기 : 자원을 할당 받은 상태에서 다른 자원을 할당 받기를 기다리고 있는 상태
	- 비선점 : 어떤 프로세스도 다른 프로세스의 자원을 강제로 빼앗지 못하는 상태
	- 원형 대기 : 프로세스들이 원의 형태로 자원을 대기하는 상태

<span style="color:yellow">교착 상태 예방</span>
- 애초에 교착 상태가 발생하지 않도록 교착 상태 발생 조건 중 하나를 제거
	- 상호 배제 제거
		- 모든 자원을 공유 가능하게 만들기
		- 현실적인 방법이 아님
	- 점유 대기 제거
		- 특정 프로세스에 자원을 모두 할당하거나, 아예 할당하지 않는 방식으로 배분
			- 자원의 활용률을 낮출 수 있는 방식
	- 비선점  제거
		- 다른 프로세스의 자원을 빼앗을 수 있도록 함
			- 선점이 가능한 자원(e.g. CPU)에 한해 효과적
				- 모든 자원이 선점 가능한 것은 아님
	- 원형 대기 제거
		- 자원에 번호를 붙이고 오름차순으로 할당하면 원형 대기는 발생하지 않음
			- 자원에 번호를 붙이는 것은 어려운 작업
			- 어떤 자원에 어떤 번호를 붙이느냐에 따라 활용률이 달라짐
- 교착 상태가 발생하지 않음은 보장할 수 있으나 부작용이 따르는 방식

<span style="color:yellow">교착 상태 회피</span>
- 교착 상태를 <span style="color:red">무분별한 자원 할당으로 인해 발생</span>했다고 간주
- 교착 상태가 발생하지 않을 만큼 <span style="color:red">조심 조심 할당</span>하기
- 배분할 수 있는 자원의 양을 고려하여 교착 상태가 발생하지 않을 만큼만 자원 배분
	- 안전 순서열 : 교착 상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서
	- 안전 상태 : 교착 상태 없이 모든 프로세스가 자원을 할당 받고 종료될 수 있는 상태
	- 불안전 상태 : 교착 상태가 발생할 수도 있는 상태
		- 교착 상태 회피 예시
			- 컴퓨터 시스템에 총 12개의 자원
			- 프로세스 P1, P2, P3 가 각각 5개, 2개, 2개의 자원을 할당받아 실행 중
				- 따라서 운영체제가 배분할 수 있는 자원의 개수는 3개
			- 프로세스 P1, P2, P3 는 각각 최대 10개, 4개, 9개의 자원을 요구할 수 있다고 가정
			- ![[Pasted image 20231026014150.png]]
				- 안전 순서열 : P2 -> P1 -> P3
	- 안전 상태에서 안전 상태로 움직이는 경우에만 자원을 할당하는 방식
	- 항시 안전 상태를 유지하도록 자원을 할당하는 방식
		- c.f. 은행원 알고리즘

<span style="color:yellow">교착 상태 검출 후 회복</span>
- 교착 상태의 발생을 인정하고 사후에 조치하는 방식
- 프로세스가 자원을 요구하면 일단 할당, 교착 상태가 검출되면 회복
- 회복 방식
	- <span style="color:red">선점을 통한 회복 </span>
		- 교착 상태가 해결될 때까지 한 프로세스씩 자원을 몰아주는 방식
	- <span style="color:red">프로세스 강제 종료를 통한 회복</span>
		- 교착 상태에 놓인 프로세스 모두 강제 종료(작업 내용 손실 위험)
		- 교착 상태가 해결될 때까지 한 프로세스씩 강제 종료(오버헤드 발생)
- 교착 상태 무시
	- 타조 알고리즘